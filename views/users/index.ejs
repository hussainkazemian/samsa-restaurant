<!-- index.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head') %>
</head>
<body>
    <!-- navigation -->
    <%- include('../partials/nav') %>

    <div class="container mt-3">
        <div class="row">
            <div class="col-md-3">
                <%- include('../partials/menu-menu', { menus, selectedMenu }) %>
            </div>
            <div class="col-md-9">
                <% if (user && user.username) { %>
                    <h1 class="h3 mb-3">Welcome to Samsa Restaurant, <%= user.username %>!</h1>
                <% } else { %>
                    <h1 class="h3 mb-3"><%= title %></h1>
                <% } %>

                <% if (products.length == 0) { %>
                    <%- include('../partials/no-products') %>
                <% } %>

                <% products.forEach(product => { %>
                    <!-- Corrected line: Passing 'product' as an object -->
                    <%- include('../partials/product-card', { product: product, isSingleProduct: false }) %>
                <% }) %>

                <!-- Pagination (optional, only if needed) -->
                <% if (products.filter(b => b.approval).length > 3) { %>
                    <%- include('../partials/paginations') %>
                <% } %>
            </div>
        </div>
    </div>

    <!-- footer -->
    <%- include('../partials/footer') %>
</body>
</html>
